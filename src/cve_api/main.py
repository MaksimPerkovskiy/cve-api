from flask import Flask
from pydantic.error_wrappers import ValidationError

from presentation.api.controllers import api_blueprint
from presentation.api.exception_handlers import handle_invalid_param_error
from di.container import Container


def create_app() -> Flask:
    application = Flask(__name__)
    container = Container()
    application.container = container
    application.register_blueprint(api_blueprint)
    application.register_error_handler(ValidationError, handle_invalid_param_error)
    return application


app = create_app()


# Only for development!!!
if __name__ == '__main__':
    app.run()
